# ══════════════════════════════════════════════════════════════════════════════
# Singapore SMB Support Agent - Environment Configuration
# ══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Application Settings
# ─────────────────────────────────────────────────────────────────────────────
APP_NAME="Singapore SMB Support Agent"
APP_ENV=development
APP_DEBUG=true
APP_SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars

# ─────────────────────────────────────────────────────────────────────────────
# API Configuration
# ─────────────────────────────────────────────────────────────────────────────
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true

# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000

# ─────────────────────────────────────────────────────────────────────────────
# LLM Configuration
# ─────────────────────────────────────────────────────────────────────────────
# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Anthropic (fallback)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Cohere (for reranking)
COHERE_API_KEY=your-cohere-api-key-here

# ─────────────────────────────────────────────────────────────────────────────
# Vector Database (Qdrant)
# ─────────────────────────────────────────────────────────────────────────────
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=knowledge_base
QDRANT_SUMMARIES_COLLECTION=document_summaries

# ─────────────────────────────────────────────────────────────────────────────
# PostgreSQL Database
# ─────────────────────────────────────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=support_agent
POSTGRES_USER=support_agent
POSTGRES_PASSWORD=your-secure-postgres-password

# Connection URL (constructed from above)
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ─────────────────────────────────────────────────────────────────────────────
# Redis Configuration
# ─────────────────────────────────────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis URL (constructed from above)
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ─────────────────────────────────────────────────────────────────────────────
# Memory Configuration
# ─────────────────────────────────────────────────────────────────────────────
# Short-term memory TTL in seconds (30 minutes default)
SESSION_TTL_SECONDS=1800

# Maximum messages before summarization triggers
MAX_MESSAGES_BEFORE_SUMMARY=20

# Token budget for working memory
WORKING_MEMORY_TOKEN_BUDGET=4000

# ─────────────────────────────────────────────────────────────────────────────
# RAG Configuration
# ─────────────────────────────────────────────────────────────────────────────
# Retrieval settings
RAG_TOP_K_RETRIEVAL=50
RAG_TOP_K_RERANK=5
RAG_SIMILARITY_THRESHOLD=0.7

# Chunking settings
CHUNK_SIZE=512
CHUNK_OVERLAP=100

# ─────────────────────────────────────────────────────────────────────────────
# Agent Configuration
# ─────────────────────────────────────────────────────────────────────────────
# Confidence threshold for escalation
CONFIDENCE_THRESHOLD=0.7

# Maximum retries for LLM calls
MAX_LLM_RETRIES=3

# Response timeout in seconds
RESPONSE_TIMEOUT_SECONDS=30

# ─────────────────────────────────────────────────────────────────────────────
# Business Configuration (Singapore SMB)
# ─────────────────────────────────────────────────────────────────────────────
BUSINESS_NAME="Your Business Name"
BUSINESS_TIMEZONE=Asia/Singapore
BUSINESS_HOURS_START=09:00
BUSINESS_HOURS_END=18:00
BUSINESS_WORKING_DAYS=Monday,Tuesday,Wednesday,Thursday,Friday

# ─────────────────────────────────────────────────────────────────────────────
# Logging Configuration
# ─────────────────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log

# ─────────────────────────────────────────────────────────────────────────────
# PDPA Compliance Settings
# ─────────────────────────────────────────────────────────────────────────────
# Data retention period in days
DATA_RETENTION_DAYS=30

# Enable anonymization for analytics
ENABLE_ANONYMIZATION=true
